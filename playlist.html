<!DOCTYPE html>
<html lang="en">
  <!-- Head -->
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <link rel="stylesheet" href="styles.css" />

    <title>Fakify</title>
    <script>
      /* Add searched song to search history */
      document.addEventListener('DOMContentLoaded', () => {
        const playListUl =
          document.getElementById('playListUl');
        let playlist =
          JSON.parse(localStorage.getItem('playlist')) ||
          [];

        playlist.forEach((track) => {
          const newTrackLi = document.createElement('li');
          newTrackLi.innerHTML = `<img class="li-img" src="${track.image}" alt="${track.name}" "> <h2 id="list-h2"> ${track.name}</h2>`;
          playListUl.appendChild(newTrackLi);
        });
      });
      /* End of add searched song to search history */
      /* Clear button for history */
      document.addEventListener('DOMContentLoaded', () => {
        const clearButton = document.querySelector(
          '#clearStorageButton'
        );
        clearButton.addEventListener('click', function () {
          localStorage.removeItem('playlist');
          location.reload();
        });
      });

      /* End of clear button for history */
    </script>
  </head>
  <!-- end of Head -->
  <body>
    <div class="wrapper">
      <!-- Home / search -->
      <div id="home" class="box">
        <button class="home-button">
          <img
            id="authorize"
            class="img-buttons"
            src="imgs/fakify-logos_transparent.png"
            alt=""
            onclick="window.location.href='playlist.html' + authorizationCode"
          />
        </button>
      </div>
      <!-- end of Home / search -->

      <!-- Library / playlist -->
      <div id="library" class="box">
        <input
          type="text"
          id="search-bar"
          placeholder="Search for a song"
        />
        <button
          class="search-button"
          id="search-play-button"
        >
          <h2 class="h2-auto">play</h2>
        </button>
        <button class="search-button" id="playlist">
          <!--  If the site is reloaded the token dissapears, working on this,
          meanwhile you need to press the reload token button if page is reloaded
          for the token to be valid -->
          <h2 class="h2-auto">Reload token</h2>
        </button>
        <button
          class="search-button"
          id="clearStorageButton"
        >
          <h2 class="h2-auto">clear history</h2>
        </button>
      </div>
      <!-- end of Library / playlist -->

      <!-- Active window -->

      <div id="active-window" class="box">
        <div id="trackInfo-history">
          <h2>Search history</h2>
        </div>
        <div class="track-list">
          <ul id="playListUl"></ul>
        </div>
      </div>

      <!-- end of Active window -->

      <!-- Music player -->
      <div id="music-player" class="box">
        <div id="trackInfo"><h2>Trackinfo</h2></div>
        <audio controls id="audioPreview">
          <!-- If browser is without support shows -->
          Your browser does not support the audio element.
        </audio>
      </div>
      <!-- end of Music player -->
    </div>

    <!-- Script -->
    <script src="history.js"></script>
  </body>
</html>
